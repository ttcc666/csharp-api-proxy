2025-09-01 22:54:41.729 +08:00 [INF] 应用程序启动完成，正在监听请求...
2025-09-01 22:55:38.619 +08:00 [INF] 📥 请求详情: {"Timestamp":"2025-09-01 14:55:38.601 UTC","RequestId":"0HNF9CUEIQLOI:00000001","Method":"POST","Scheme":"https","Host":"localhost:7106","Path":"/v1/chat/completions","QueryString":"","ContentType":"application/json","ContentLength":7015,"UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) CherryStudio/1.5.8 Chrome/138.0.7204.243 Electron/37.4.0 Safari/537.36","Referer":"","ClientIP":"::1","Headers":{"Accept":"application/json","Host":"localhost:7106","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) CherryStudio/1.5.8 ...","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN","Authorization":"[已隐藏]","Content-Type":"application/json","Content-Length":"7015","x-stainless-timeout":"600","sec-ch-ua-platform":"\"Windows\"","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","x-stainless-retry-count":"0","x-api-key":"[已隐藏]","sec-ch-ua-mobile":"?0","x-title":"Cherry Studio","http-referer":"https://cherry-ai.com","sec-fetch-site":"cross-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","priority":"u=1, i"},"HasBody":false}
2025-09-01 22:55:38.632 +08:00 [INF] 🚀 请求开始: POST /v1/chat/completions | RequestId: 0HNF9CUEIQLOI:00000001 | 客户端IP: ::1 | UserAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) CherryStudio/1.5.8 Chrome/138.0.7204.243 Electron/37.4.0 Safari/537.36 | ContentLength: 7015
2025-09-01 22:55:38.726 +08:00 [INF] 创建聊天会话 [RequestId: 14a26c88] [SessionId: 1756738538725-1756738538] [Features: Thinking=true, Search=true]
2025-09-01 22:55:38.739 +08:00 [INF] 获取新的匿名令牌
2025-09-01 22:55:41.366 +08:00 [WRN] 获取匿名令牌失败，使用默认令牌
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, TimeSpan absoluteExpirationRelativeToNow)
   at OpenAI_Compatible_API_Proxy_for_Z.Services.UpstreamService.GetAuthTokenAsync(CancellationToken cancellationToken) in D:\Demo\csharp-api-proxy\csharp-api-proxy\Services\UpstreamService.cs:line 57
2025-09-01 22:55:43.094 +08:00 [WRN] One or more of the following response headers have been removed because they are invalid for HTTP/2 and HTTP/3 responses: 'Connection', 'Transfer-Encoding', 'Keep-Alive', 'Upgrade' and 'Proxy-Connection'.
2025-09-01 22:57:55.231 +08:00 [INF] 流处理完成 [RequestId: 14a26c88] [Chunks: 749] [Bytes: 168421]
2025-09-01 22:57:55.241 +08:00 [INF] ✅ 请求完成: POST /v1/chat/completions | 状态码: 200 | 耗时: 136609.6253ms | 响应大小: 未知大小 | RequestId: 0HNF9CUEIQLOI:00000001
2025-09-01 22:57:55.247 +08:00 [ERR] 🐌 严重慢请求: POST /v1/chat/completions 耗时 136609.6253ms [RequestId: 0HNF9CUEIQLOI:00000001]
2025-09-01 22:57:55.252 +08:00 [INF] 📊 性能指标 - ChatCompletion: 耗时=136609.6253ms, 流式=true, 状态码=200, 大小=null
2025-09-01 22:57:55.260 +08:00 [INF] 📤 响应详情: {"Timestamp":"2025-09-01 14:57:55.259 UTC","RequestId":"0HNF9CUEIQLOI:00000001","StatusCode":200,"ContentType":"text/event-stream","ContentLength":null,"HasBody":false}
2025-09-01 22:58:29.826 +08:00 [INF] 📥 请求详情: {"Timestamp":"2025-09-01 14:58:29.824 UTC","RequestId":"0HNF9CUEIQLOI:00000003","Method":"POST","Scheme":"https","Host":"localhost:7106","Path":"/v1/chat/completions","QueryString":"","ContentType":"application/json","ContentLength":16869,"UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) CherryStudio/1.5.8 Chrome/138.0.7204.243 Electron/37.4.0 Safari/537.36","Referer":"","ClientIP":"::1","Headers":{"Accept":"application/json","Host":"localhost:7106","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) CherryStudio/1.5.8 ...","Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"zh-CN","Authorization":"[已隐藏]","Content-Type":"application/json","Content-Length":"16869","x-stainless-timeout":"600","sec-ch-ua-platform":"\"Windows\"","sec-ch-ua":"\"Not)A;Brand\";v=\"8\", \"Chromium\";v=\"138\"","x-stainless-retry-count":"0","x-api-key":"[已隐藏]","sec-ch-ua-mobile":"?0","x-title":"Cherry Studio","http-referer":"https://cherry-ai.com","sec-fetch-site":"cross-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","priority":"u=1, i"},"HasBody":false}
2025-09-01 22:58:29.831 +08:00 [INF] 🚀 请求开始: POST /v1/chat/completions | RequestId: 0HNF9CUEIQLOI:00000003 | 客户端IP: ::1 | UserAgent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) CherryStudio/1.5.8 Chrome/138.0.7204.243 Electron/37.4.0 Safari/537.36 | ContentLength: 16869
2025-09-01 22:58:29.847 +08:00 [INF] 创建聊天会话 [RequestId: aa6bd28a] [SessionId: 1756738709847-1756738709] [Features: Thinking=true, Search=true]
2025-09-01 22:58:29.853 +08:00 [INF] 获取新的匿名令牌
2025-09-01 22:58:31.788 +08:00 [WRN] 获取匿名令牌失败，使用默认令牌
System.InvalidOperationException: Cache entry must specify a value for Size when SizeLimit is set.
   at Microsoft.Extensions.Caching.Memory.MemoryCache.SetEntry(CacheEntry entry)
   at Microsoft.Extensions.Caching.Memory.CacheExtensions.Set[TItem](IMemoryCache cache, Object key, TItem value, TimeSpan absoluteExpirationRelativeToNow)
   at OpenAI_Compatible_API_Proxy_for_Z.Services.UpstreamService.GetAuthTokenAsync(CancellationToken cancellationToken) in D:\Demo\csharp-api-proxy\csharp-api-proxy\Services\UpstreamService.cs:line 57
2025-09-01 22:58:34.600 +08:00 [WRN] One or more of the following response headers have been removed because they are invalid for HTTP/2 and HTTP/3 responses: 'Connection', 'Transfer-Encoding', 'Keep-Alive', 'Upgrade' and 'Proxy-Connection'.
